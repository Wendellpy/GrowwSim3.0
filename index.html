<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GrowwSim - Learn Investing</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui'] } } } }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root { color-scheme: light dark; --card-bg:#ffffff; --card-border: rgba(0,0,0,.08); --text:#111827; --muted:#6b7280; --bg:#f5f5f5; --shadow: 0 1px 2px rgba(0,0,0,.06); }
    @media (prefers-color-scheme: dark){
      :root { --card-bg:#0a0a0a; --card-border: rgba(255,255,255,.08); --text:#f5f5f5; --bg:#0a0a0a; --shadow: 0 1px 2px rgba(0,0,0,.4); }
    }
    .card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 0.75rem; box-shadow: var(--shadow); }
    .btn { padding: 0.5rem 0.75rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: 500; transition: opacity .15s ease, transform .06s ease; }
    .btn:hover { opacity: .9; }
    .btn:active { transform: scale(.98); }
    .btn-primary { background: #10b981; color: #fff; }
    .btn-ghost { background: rgba(0,0,0,.04); color: inherit; }
    @media (prefers-color-scheme: dark){ .btn-ghost { background: rgba(255,255,255,.06); } }
    .tab { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: 600; cursor: pointer; transition: background .15s ease, color .15s ease; }
    .tab-active { background: #10b981; color: #fff; }
    .chip { padding: 0.25rem 0.5rem; border-radius: 0.375rem; font-size: 0.75rem; font-weight: 600; }
    .up { color: #059669; }
    .down { color: #e11d48; }
    input[type=checkbox] { accent-color:#10b981; }
    /* Clean numeric inputs: hide default spin buttons */
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }
    input[type=range] { -webkit-appearance:none; appearance:none; width:100%; background:transparent; }
    input[type=range]::-webkit-slider-runnable-track { height:4px; border-radius:9999px; background:linear-gradient(90deg,#10b981,#22c55e); }
    input[type=range]::-moz-range-track { height:4px; border-radius:9999px; background:linear-gradient(90deg,#10b981,#22c55e); }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance:none; appearance:none; width:14px; height:14px; border-radius:9999px; background:#10b981; border:2px solid white; margin-top:-5px; box-shadow:0 0 0 2px rgba(16,185,129,0.4); }
    input[type=range]::-moz-range-thumb { width:14px; height:14px; border-radius:9999px; background:#10b981; border:2px solid white; box-shadow:0 0 0 2px rgba(16,185,129,0.4); }
  </style>
</head>
<body class="bg-neutral-50 dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 min-h-screen">
  <header id="mainHeader" class="sticky top-0 z-20 bg-white/80 dark:bg-neutral-950/80 backdrop-blur border-b border-neutral-200/70 dark:border-neutral-800">
    <div class="max-w-7xl mx-auto px-4 py-2 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <i class="fa-solid fa-leaf text-emerald-600 text-xl"></i>
        <span class="font-semibold">GrowwSim</span>
      </div>
      <nav class="hidden md:flex items-center gap-3 ml-4" id="nav-tabs">
        <button class="tab" data-target="dashboard"><i class="fa-solid fa-house"></i> Home</button>
        <button class="tab" data-target="stocks"><i class="fa-solid fa-chart-line"></i> Stocks</button>
        <button class="tab whitespace-nowrap" data-target="funds"><i class="fa-solid fa-coins"></i> Mutual Funds</button>
        <button class="tab whitespace-nowrap" data-target="sip"><i class="fa-solid fa-calculator"></i> SIP Calculator</button>
        <button class="tab" data-target="portfolio"><i class="fa-solid fa-briefcase"></i> Portfolio</button>
      </nav>
      <div class="flex items-center gap-3">
        <div class="hidden sm:flex items-center gap-2">
          <button id="liveToggle" class="tab"><i class="fa-solid fa-bolt"></i> Live</button>
          <div class="relative">
            <input id="finnhubKey" type="password" placeholder="Finnhub API Key" class="card px-3 py-2 text-xs" style="min-width: 14rem;" />
          </div>
        </div>
        <button id="resetBtn" class="btn btn-ghost hidden sm:inline-flex items-center gap-2"><i class="fa-solid fa-rotate-left"></i><span>Reset</span></button>
        <div class="text-sm hidden md:block">Balance: <span id="balanceDisplay" class="font-semibold"></span></div>
        <div id="userMenuWrap" class="relative">
          <button id="userMenuBtn" class="card px-3 py-1.5 flex items-center gap-2 text-xs rounded-full bg-neutral-900 text-neutral-100 border border-neutral-700">
            <div id="userAvatar" class="w-6 h-6 rounded-full bg-emerald-600 flex items-center justify-center text-[11px] font-semibold">U</div>
            <span id="userGreeting">Hi, User</span>
            <i class="fa-solid fa-chevron-down text-[10px]"></i>
          </button>
          <div id="userMenu" class="absolute right-0 mt-1 w-40 card py-1 text-xs hidden">
            <button id="userSettings" class="w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800">Settings</button>
            <button id="userLogout" class="w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800">Logout</button>
          </div>
        </div>
        <button class="md:hidden btn btn-ghost" id="mobileMenuBtn"><i class="fa-solid fa-bars"></i></button>
      </div>
    </div>
    <div id="mobileMenu" class="md:hidden px-4 pb-3 hidden">
      <div class="flex flex-wrap gap-2" id="mobile-tabs"></div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-4 space-y-4">
    <!-- Dashboard -->
    <section id="dashboard" class="space-y-4">
      <div class="grid md:grid-cols-3 gap-4">
        <div class="card p-5">
          <div class="text-sm text-neutral-500">Portfolio Value</div>
          <div id="portfolioValue" class="text-2xl font-semibold mt-1">₹0</div>
          <div id="portfolioPL" class="mt-2 text-sm"></div>
        </div>
        <div class="card p-5">
          <div class="text-sm text-neutral-500">Total Invested</div>
          <div id="totalInvested" class="text-2xl font-semibold mt-1">₹0</div>
        </div>
        <div class="card p-5">
          <div class="text-sm text-neutral-500">Cash Balance</div>
          <div id="cashBalance" class="text-2xl font-semibold mt-1">₹0</div>
        </div>
      </div>
      <div class="card p-5">
        <div class="flex items-center justify-between">
          <div class="text-sm font-medium">Sensex</div>
          <div class="flex gap-2 text-xs" id="dashTfGroup">
            <button class="chip btn-ghost" data-tf="1D">1D</button>
            <button class="chip btn-ghost" data-tf="1W">1W</button>
            <button class="chip btn-ghost" data-tf="1M">1M</button>
            <button class="chip btn-ghost" data-tf="1Y">1Y</button>
          </div>
        </div>
        <div class="mt-4">
          <canvas id="marketChart" height="90"></canvas>
        </div>
      </div>
      <div class="card p-5">
        <div class="flex items-center justify-between">
          <div class="text-sm font-medium">Watchlist</div>
        </div>
        <div id="watchlistEmpty" class="text-sm text-neutral-500 mt-2">Your watchlist is empty. Star stocks to add.</div>
        <div id="watchlistList" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-3"></div>
      </div>
    </section>

    <!-- Stocks -->
    <section id="stocks" class="hidden space-y-4">
      <div class="card p-4 flex items-center justify-between gap-3 flex-wrap">
        <div class="text-sm font-medium">Stocks</div>
        <div class="flex-1 min-w-[200px] max-w-[360px]">
          <input id="stockSearch" type="text" placeholder="Search stocks (name or symbol)" class="card w-full px-3 py-2 text-sm" />
        </div>
        <div class="flex gap-2 text-xs" id="stockTfGroup">
          <button class="chip btn-ghost" data-tf="1D">1D</button>
          <button class="chip btn-ghost" data-tf="1W">1W</button>
          <button class="chip btn-ghost" data-tf="1M">1M</button>
          <button class="chip btn-ghost" data-tf="1Y">1Y</button>
        </div>
      </div>
      <div id="stocksList" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
    </section>

    <!-- Mutual Funds -->
    <section id="funds" class="hidden space-y-4">
      <div class="card p-4 flex items-center justify-between">
        <div class="text-sm font-medium">Mutual Funds</div>
      </div>
      <div id="fundsList" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
      <div class="card p-5">
        <h3 class="font-semibold mb-3">My SIPs</h3>
        <div id="mySips" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
      </div>
    </section>

    <!-- SIP Calculator -->
    <section id="sip" class="hidden space-y-4">
      <div class="card p-5 space-y-4 max-h-[70vh] overflow-y-auto">
        <div class="grid md:grid-cols-3 gap-4">
          <div>
            <label class="text-sm">Monthly Investment (₹)</label>
            <input id="sipAmount" type="number" class="mt-1 w-full card px-3 py-2" value="5000" />
            <input id="sipAmountSlider" type="range" min="1000" max="100000" step="1000" class="w-full mt-2" value="5000" />
          </div>
          <div>
            <label class="text-sm">Expected Return (% p.a.)</label>
            <input id="sipRate" type="number" class="mt-1 w-full card px-3 py-2" value="12" />
            <input id="sipRateSlider" type="range" min="1" max="25" step="0.5" class="w-full mt-2" value="12" />
          </div>
          <div>
            <label class="text-sm">Years</label>
            <input id="sipYears" type="number" class="mt-1 w-full card px-3 py-2" value="10" />
            <input id="sipYearsSlider" type="range" min="1" max="40" step="1" class="w-full mt-2" value="10" />
          </div>
        </div>
        <div class="flex gap-3">
          <button id="calcSipBtn" class="btn btn-primary">Calculate</button>
        </div>
        <div class="grid md:grid-cols-3 gap-4">
          <div class="card p-4">
            <div class="text-sm text-neutral-500">Total Invested</div>
            <div id="sipInvested" class="text-xl font-semibold mt-1">₹0</div>
          </div>
          <div class="card p-4">
            <div class="text-sm text-neutral-500">Expected Value</div>
            <div id="sipExpected" class="text-xl font-semibold mt-1">₹0</div>
          </div>
          <div class="card p-4">
            <div class="text-sm text-neutral-500">Wealth Gain</div>
            <div id="sipGain" class="text-xl font-semibold mt-1">₹0</div>
          </div>
        </div>
        <div class="flex items-center justify-between text-xs mt-1">
          <div class="text-neutral-500">Chart Type</div>
          <div class="flex gap-2" id="sipChartTypeGroup">
            <button class="chip btn-ghost" data-type="line">Line</button>
            <button class="chip btn-ghost" data-type="pie">Pie</button>
          </div>
        </div>
        <div class="card p-4 mt-2 space-y-4">
          <div id="sipChartLineWrap" class="h-48">
            <canvas id="sipChart" height="80"></canvas>
          </div>
          <div id="sipChartPieWrap" class="hidden h-48 flex items-center justify-center">
            <canvas id="sipPieChart" height="80"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Portfolio -->
    <section id="portfolio" class="hidden space-y-4">
      <div class="grid md:grid-cols-3 gap-4">
        <div class="card p-5">
          <div class="text-sm text-neutral-500">Invested</div>
          <div id="pfInvested" class="text-2xl font-semibold mt-1">₹0</div>
        </div>
        <div class="card p-5">
          <div class="text-sm text-neutral-500">Current Value</div>
          <div id="pfValue" class="text-2xl font-semibold mt-1">₹0</div>
        </div>
        <div class="card p-5">
          <div class="text-sm text-neutral-500">P/L</div>
          <div id="pfPL" class="text-2xl font-semibold mt-1">₹0</div>
        </div>
      </div>

      <div class="card p-4">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">Stocks</h3>
        </div>
        <div id="portfolioStocksEmpty" class="text-sm text-neutral-500 mt-2 hidden">No stock holdings yet.</div>
        <div id="portfolioStocks" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-3"></div>
      </div>

      <div class="card p-4">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">Mutual Funds</h3>
        </div>
        <div id="portfolioFundsEmpty" class="text-sm text-neutral-500 mt-2 hidden">No mutual fund holdings yet.</div>
        <div id="portfolioFunds" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-3"></div>
      </div>

      <div class="card p-4">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">Transaction History</h3>
        </div>
        <div id="txEmpty" class="text-sm text-neutral-500 mt-2 hidden">No transactions yet.</div>
        <div id="txList" class="mt-3 flex flex-col gap-2"></div>
      </div>
    </section>

    <!-- Login / Signup -->
    <section id="auth" class="hidden min-h-[70vh] flex items-center justify-center">
      <div class="card p-6 sm:p-8 w-full max-w-md bg-neutral-950/95 text-neutral-100 border border-neutral-800">
        <h2 class="text-base font-semibold mb-1">GrowwSim</h2>
        <h3 class="text-lg font-semibold mb-6">Sign in</h3>
        <div class="space-y-4 text-sm">
          <div class="space-y-1">
            <label class="block text-xs text-neutral-400" for="loginEmail">Username</label>
            <input id="loginEmail" type="text" class="card w-full px-3 py-2 text-sm bg-neutral-900 border-neutral-700" value="demo" />
          </div>
          <div class="space-y-1">
            <label class="block text-xs text-neutral-400" for="loginPassword">Password</label>
            <input id="loginPassword" type="password" class="card w-full px-3 py-2 text-sm bg-neutral-900 border-neutral-700" value="demo123" />
          </div>
          <div class="flex gap-3 mt-2">
            <button id="loginBtn" class="btn btn-primary flex-1 text-sm">Login</button>
            <button id="signupBtn" class="btn btn-ghost flex-1 text-sm">Sign up</button>
          </div>
          <p class="text-[11px] text-neutral-500 mt-2">Tip: You can use the demo account <span class="font-mono">demo / demo123</span>.</p>
        </div>
        <div class="mt-6 border-t border-neutral-800 pt-4 text-[11px] text-neutral-500">
          <div class="font-medium mb-1">Create a new account</div>
          <div class="grid gap-2">
            <input id="signupName" type="text" placeholder="Full name" class="card w-full px-3 py-2 text-xs bg-neutral-900 border-neutral-800" />
            <input id="signupEmail" type="text" placeholder="Username" class="card w-full px-3 py-2 text-xs bg-neutral-900 border-neutral-800" />
            <input id="signupPassword" type="password" placeholder="Password" class="card w-full px-3 py-2 text-xs bg-neutral-900 border-neutral-800" />
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="py-10 text-center text-sm text-neutral-500">
    ©2025 GrowwSim. All rights reserved to Wendell
  </footer>

  <div id="modal" class="fixed inset-0 hidden items-center justify-center z-40">
    <div class="absolute inset-0 bg-black/50" data-close="1"></div>
    <div class="relative card p-5 md:p-6 w-[95%] max-w-5xl z-10">
      <div class="flex items-start justify-between gap-3">
        <h3 id="modalTitle" class="font-semibold">Action</h3>
        <button class="btn btn-ghost" data-close="1"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="mt-4 space-y-3" id="modalBody"></div>
      <div class="mt-4 flex gap-2 justify-end">
        <button class="btn btn-ghost" data-close="1">Cancel</button>
        <button class="btn btn-primary" id="modalConfirm">Confirm</button>
      </div>
    </div>
  </div>

  <div id="toasts" class="fixed top-4 right-4 z-50 space-y-2"></div>

  <script type="module" src="./data.js"></script>
  <script type="module" src="./app.js"></script>
</body>
</html>
